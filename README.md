# ğŸ§­ Festival Compass in Seoul

**[Dataup contest 2025] ì„œìš¸ì‹œ ì™¸êµ­ì¸ ê´€ê´‘ê°ì˜ 'ê´€ê´‘ ì ë¦¼' ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ íŠ¹ìƒ‰ ë¬¸í™” ì²´í—˜ ì¶”ì²œ ì†”ë£¨ì…˜**

-----

## 1\. ğŸ‘¥ íŒ€ êµ¬ì„± ë° ì—­í•  (4ì¸ ê¸°ì¤€)

  * **[Role 1] ML/Backend (ë³¸ì¸)**
      * í•µì‹¬ ì¶”ì²œ ëª¨ë¸ (TF-IDF, Cosine Similarity) ê°œë°œ
      * FastAPIë¥¼ ì‚¬ìš©í•œ ë°±ì—”ë“œ API ì„œë²„ êµ¬ì¶• ë° ë°°í¬
  * **[Role 2] ê¸°íš ë° ë””ìì¸**
      * UX/UI ë””ìì¸ (Figma)
      * ìµœì¢… ë°œí‘œ PPT ë° ëŒ€ë³¸ ì œì‘
  * **[Role 3] Frontend**
      * ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤(UI) ê°œë°œ (Static HTML/CSS/JS)
      * ë°±ì—”ë“œ APIì™€ ë°ì´í„° ì—°ë™
  * **[Role 4] Database**
      * API ë°ì´í„° ìˆ˜ì§‘ ë° ì „ì²˜ë¦¬ (`3_detailed_TourAPI_collect.ipynb`)
      * ìš´ì˜ìš© ë°ì´í„°ë² ì´ìŠ¤(SQLite) êµ¬ì¶• ë° ë§ˆì´ê·¸ë ˆì´ì…˜

-----

## 2\. ğŸ¯ í”„ë¡œì íŠ¸ ëª©í‘œ (Problem Definition)

### 1\) í˜„ìƒ (The Problem): ê´€ê´‘ ì ë¦¼

'ê´€ê´‘ ë¹…ë°ì´í„° API' ë¶„ì„ ê²°ê³¼, ì„œìš¸ì„ ë°©ë¬¸í•˜ëŠ” ì™¸êµ­ì¸ ê´€ê´‘ê°ì˜ ë°©ë¬¸ì§€ëŠ” **ì¤‘êµ¬(ëª…ë™), ë§ˆí¬êµ¬(í™ëŒ€), ì¢…ë¡œêµ¬(ê¶ê¶) ë“± ì†Œìˆ˜ ì§€ì—­ì— ì‹¬ê°í•˜ê²Œ í¸ì¤‘**ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

### 2\) ì›ì¸ (The Root Cause): ì •ë³´ ê²©ì°¨

ì´ ì ë¦¼ í˜„ìƒì€ ëª…ë°±í•œ \*\*'ì •ë³´ ê²©ì°¨(Information Gap)'\*\*ì—ì„œ ë¹„ë¡¯ë©ë‹ˆë‹¤. TourAPIì˜ 'êµ­ë¬¸' ì •ë³´ì™€ 'ì˜ë¬¸' ì •ë³´ë¥¼ ë¹„êµ ë¶„ì„í•œ ê²°ê³¼, ì™¸êµ­ì¸ ê´€ê´‘ê°ì—ê²Œ ì œê³µë˜ëŠ” ì •ë³´ëŠ” **ì–‘ì ìœ¼ë¡œ ì ˆëŒ€ ë¶€ì¡±**í•©ë‹ˆë‹¤. (ì˜ˆ: êµ­ë¬¸ ì¶•ì œ ì •ë³´ 240ê±´ vs ì˜ë¬¸ 58ê±´)

### 3\) í•´ê²°ì±… (Our Solution): ë§ì¶¤í˜• ì¶”ì²œ

ìš°ë¦¬ëŠ” ì´ 'ì •ë³´ ê²©ì°¨'ë¥¼ í•´ì†Œí•˜ê¸° ìœ„í•´, **í’ë¶€í•œ 'êµ­ë¬¸' ë°ì´í„°ë¥¼ ê¸°ë°˜**ìœ¼ë¡œ ML ëª¨ë¸ì„ êµ¬ì¶•í•©ë‹ˆë‹¤. ì´ ëª¨ë¸ì€ ì™¸êµ­ì¸ ê´€ê´‘ê°ì´ ë°œê²¬í•˜ì§€ ëª»í–ˆë˜ \*\*'ìˆ¨ê²¨ì§„ íŠ¹ìƒ‰ í–‰ì‚¬'\*\*ë¥¼ ë°œêµ´í•˜ê³  ì¶”ì²œí•˜ì—¬, íšì¼í™”ëœ ê´€ê´‘ ê²½í—˜ì„ ë‹¤ì–‘í™”í•˜ê³  **'ì ë¦¼ í˜„ìƒ'ì„ ì™„í™”**í•©ë‹ˆë‹¤.

-----

## 3\. ğŸ’¡ í•µì‹¬ MVP ë¡œì§ (User's Point 1)

ìš°ë¦¬ ì†”ë£¨ì…˜ì€ "ì ë¦¼ í˜„ìƒ í•´ì†Œ"ë¼ëŠ” ëª…í™•í•œ ëª©í‘œë¥¼ ìœ„í•´ **ë‘ ê°€ì§€ íŠ¸ë™(Two-Track)ìœ¼ë¡œ ì¶”ì²œ**ì„ ì œê³µí•©ë‹ˆë‹¤.

  * **Track 1: "You might also like:" (ìœ ì‚¬ë„ Top N)**
      * ì„ íƒí•œ í–‰ì‚¬ì™€ í…ìŠ¤íŠ¸(ì½˜í…ì¸ )ê°€ ê°€ì¥ ìœ ì‚¬í•œ í–‰ì‚¬ë¥¼ ì¶”ì²œí•˜ì—¬ ì‚¬ìš©ìì˜ ë§Œì¡±ë„ë¥¼ ë†’ì…ë‹ˆë‹¤.
      * *(ì˜ˆ: 'ê°€ë½ëª° ë¹µì¶•ì œ' â†’ 'ê°€ë½ ì˜¥í† ë²„í˜ìŠ¤íŠ¸')*
  * **Track 2: "How about these areas?" (ë¹„ì¸ê¸° ì§€ì—­êµ¬ Top N)**
      * ìœ ì‚¬ë„ê°€ ë†’ìœ¼ë©´ì„œ, 'ë¹…ë°ì´í„° API' ë¶„ì„ ê²°ê³¼ ì •ì˜ëœ \*\*'ë¹„ì¸ê¸° ì§€ì—­êµ¬(ë°©ë¬¸ìœ¨ í•˜ìœ„ 10ê³³)'\*\*ì— ì†í•˜ëŠ” í–‰ì‚¬ë¥¼ ì¶”ì²œí•©ë‹ˆë‹¤.
      * *(ì˜ˆ: 'ê°€ë½ëª° ë¹µì¶•ì œ' (ì†¡íŒŒêµ¬) â†’ 'ì„œëŒ€ë¬¸ ë´„ë¹›ì¶•ì œ' (ì„œëŒ€ë¬¸êµ¬))*

ì´ ë¡œì§ì€ `backend/app/main.py`ì˜ `get_recommendations` í•¨ìˆ˜ì— êµ¬í˜„ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

-----

## 4\. âš™ï¸ ML ëª¨ë¸ ë¡œì§ ë° ì„ ì • (User's Point 2)

### 1\) ëª¨ë¸ ì„ ì •: TF-IDF + Cosine Similarity

  * **ì„ ì • ì´ìœ :** í”„ë¡œì íŠ¸ì˜ í•µì‹¬ì€ \*\*"ì¶•ì œ ê°œìš”(overview) í…ìŠ¤íŠ¸"\*\*ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ì½˜í…ì¸  ê¸°ë°˜ í•„í„°ë§ì…ë‹ˆë‹¤.
  * **TF-IDF + Cosine Similarity**ëŠ” ì´ ì‹œë‚˜ë¦¬ì˜¤ì—ì„œ ê°€ì¥ ê³ ì „ì ì´ë©´ì„œë„ íš¨ìœ¨ì ì¸ ì ‘ê·¼ ë°©ì‹ì…ë‹ˆë‹¤. ëª¨ë¸ íŒŒì¼(`cosine_sim_matrix.pkl`)ì˜ í¬ê¸°ê°€ ë§¤ìš° ì‘ì•„(500kb ë¯¸ë§Œ) ë¬´ë£Œ í˜¸ìŠ¤íŒ…(GCR)ì—ì„œ ë©”ëª¨ë¦¬ ë¬¸ì œ ì—†ì´ ì„œë¹™ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

### 2\) ëª¨ë¸ ë¡œì§

ëª¨ë¸ì€ \*\*'Offline í•™ìŠµ'\*\*ê³¼ \*\*'Online ì„œë¹™'\*\*ìœ¼ë¡œ ë¶„ë¦¬ë©ë‹ˆë‹¤. (ì•„í‚¤í…ì²˜ ê·¸ë¦¼ ì°¸ì¡°)

  * **Offline (in Colab):**

    1.  `3_detailed_TourAPI_collect.ipynb`ì—ì„œ ìˆ˜ì§‘í•œ ë°ì´í„°(`festivals_db.csv`)ì˜ 'overview' í…ìŠ¤íŠ¸ë¥¼ ë¡œë“œí•©ë‹ˆë‹¤.
    2.  `konlpy` (Okt)ë¡œ í•œêµ­ì–´ ëª…ì‚¬ë¥¼ í† í°í™”í•©ë‹ˆë‹¤.
    3.  `TfidfVectorizer`ë¡œ í…ìŠ¤íŠ¸ë¥¼ ë²¡í„°í™”í•©ë‹ˆë‹¤.
    4.  `cosine_similarity`ë¡œ ëª¨ë“  í–‰ì‚¬ ê°„ì˜ ìœ ì‚¬ë„ í–‰ë ¬(N x N)ì„ ê³„ì‚°í•©ë‹ˆë‹¤.
    5.  ê²°ê³¼ë¬¼(`cosine_sim_matrix.pkl`, `contentid_to_index.pkl`)ì„ `backend/models/`ì— ì €ì¥í•©ë‹ˆë‹¤.

  * **Online (in `main.py`):**

    1.  FastAPI ì„œë²„ ì‹œì‘ ì‹œ(`lifespan`) `.pkl` íŒŒì¼ë“¤ì„ RAMì— ë¯¸ë¦¬ ë¡œë“œí•©ë‹ˆë‹¤.
    2.  `/recommendations/{content_id}` ìš”ì²­ì´ ì˜¤ë©´, ë©”ëª¨ë¦¬ì— ìˆëŠ” í–‰ë ¬ì„ ì¡°íšŒí•˜ì—¬ ì‹¤ì‹œê°„ìœ¼ë¡œ ì¶”ì²œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

-----

## 5\. ğŸ”„ ë°ì´í„° íë¦„ ë° ì•„í‚¤í…ì²˜ (User's Point 3)

ë³¸ í”„ë¡œì íŠ¸ëŠ” API ì„œë²„ì™€ í”„ë¡ íŠ¸ì—”ë“œ íŒŒì¼ì„ í•˜ë‚˜ì˜ Docker ì»¨í…Œì´ë„ˆë¡œ ë¬¶ì–´ Google Cloud Runì— ë°°í¬í•˜ëŠ” **í†µí•© ì„œë²„(Monolithic) ì•„í‚¤í…ì²˜**ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

### 1\) ë°ì´í„° íë¦„

```mermaid
graph TD
    subgraph "Offline (Colab & Local)"
        A[TourAPI ë°ì´í„° ìˆ˜ì§‘] --> B(festivals_db.csv);
        B -- python migrate_to_sqlite.py --> C(festivals.db);
        B --> D(ML ëª¨ë¸ë§);
        D --> E(cosine_sim_matrix.pkl);
    end

    subgraph "Build (Local/GCP)"
        F(Dockerfile) --ë³µì‚¬--> G[Docker ì´ë¯¸ì§€];
        C --> G;
        E --> G;
        H[frontend/*] --> G;
        I[backend/*] --> G;
    end

    subgraph "Online (Google Cloud Run)"
        G --ë°°í¬--> J(FastAPI ì„œë²„ ì‹¤í–‰);
    end

    subgraph "User"
        K(ì‚¬ìš©ì) -- GET / --> J;
        J -- (index.html) --> K;
        K -- (ì§€ë„ í´ë¦­) --> L[GET /category/...?sigungucode=...];
        J -- (category.html) --> L;
        L -- (ì¶•ì œ í´ë¦­) --> M[GET /festival/...?sigungucode=...];
        J -- API: GET /festivals --> M;
        M -- (íŠ¹ì • ì¶•ì œ í´ë¦­) --> N[GET /recommandation/...?contentid=...];
        J -- API: GET /recommendations --> N;
        N -- (ìµœì¢… JSON) --> K;
    end
```

### 2\) ê¸°ìˆ  ìŠ¤íƒ (Tech Stack)

  * **Data Analysis & ML:** `Python`, `Pandas`, `Scikit-learn` (TF-IDF, Cosine Similarity), `Konlpy`
  * **Backend:** `FastAPI`
  * **Frontend (MVP):** `HTML`, `CSS`, `JavaScript` (Static)
  * **Database (MVP):** `SQLite`
  * **Deployment:** `Docker`, `Google Cloud Run (GCR)`
  * **Data Sources:** `TourAPI (KorService2, DataLabService)`

-----

## 6\. ğŸ“Š í˜„ì¬ ì§„í–‰ ìƒí™© ë° ê°œì„ ì  (User's Point 4)

### 1\) í˜„ì¬ ì§„í–‰ ìƒí™© (MVP ì™„ë£Œ)

  * **ë°ì´í„° ë¶„ì„:** 'ê´€ê´‘ ì ë¦¼' í˜„ìƒ ë° 'ì •ë³´ ê²©ì°¨' ì›ì¸ ë¶„ì„ ì™„ë£Œ.
  * **ML ëª¨ë¸:** `cosine_sim_matrix.pkl` ë“± ëª¨ë¸ íŒŒì¼ ìƒì„± ì™„ë£Œ.
  * **ë°ì´í„°ë² ì´ìŠ¤:** `festivals_db.csv`ë¥¼ `festivals.db` (SQLite)ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œ.
  * **ë°±ì—”ë“œ API:** 'Two-Track' ì¶”ì²œ(`GET /recommendations`) ë° ì§€ì—­ë³„ ì¶•ì œ ëª©ë¡(`GET /festivals`) API ê°œë°œ ì™„ë£Œ.
  * **í”„ë¡ íŠ¸ì—”ë“œ:** í”¼ê·¸ë§ˆ(`figma1_1.png` \~ `figma4.png`) ê¸°ë°˜ì˜ 4í˜ì´ì§€ íë¦„ì´ APIì™€ ì—°ë™ë˜ì–´ **ë™ì ìœ¼ë¡œ ì‘ë™(Live)** í•˜ë„ë¡ êµ¬í˜„ ì™„ë£Œ.
  * **í†µí•© ë° ë°°í¬:** FastAPIê°€ í”„ë¡ íŠ¸ì—”ë“œ íŒŒì¼ ì„œë¹™ê³¼ APIë¥¼ ëª¨ë‘ ì²˜ë¦¬í•˜ë„ë¡ í†µí•© ì™„ë£Œí–ˆìœ¼ë©°, `Dockerfile`ì„ í†µí•´ Google Cloud Runì— ì„±ê³µì ìœ¼ë¡œ ë°°í¬í–ˆìŠµë‹ˆë‹¤.

### 2\) ì°¨í›„ ê°œì„ ì 

  * **í”„ë¡ íŠ¸ì—”ë“œ ê³ ë„í™”:**
      * í˜„ì¬ì˜ ì •ì  HTML/JS êµ¬ì¡°ë¥¼ **React** ë˜ëŠ” **Next.js**ì™€ ê°™ì€ ëª¨ë˜ í”„ë ˆì„ì›Œí¬ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜í•˜ì—¬ ì»´í¬ë„ŒíŠ¸ ê¸°ë°˜ì˜ ë™ì  ë Œë”ë§ì„ êµ¬í˜„í•©ë‹ˆë‹¤.
  * **ML ëª¨ë¸ ì¶”ê°€:**
      * ê¸°íš ë‹¨ê³„ì— ìˆë˜ 'íŠ¹ìƒ‰ ì¹´í…Œê³ ë¦¬(K-Means)' ëª¨ë¸ì„ `5_ML_modeling.ipynb`ì—ì„œ êµ¬í˜„í•˜ê³ , `GET /categories` ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì‹ ì„¤í•©ë‹ˆë‹¤.
  * **ë°ì´í„°ë² ì´ìŠ¤ ìµœì í™”:**
      * `lifespan`ì—ì„œ SQLite DB ì „ì²´ë¥¼ Pandas DataFrameìœ¼ë¡œ ë¡œë“œí•˜ëŠ” ëŒ€ì‹ , API í˜¸ì¶œ ì‹œë§ˆë‹¤ í•„ìš”í•œ ë°ì´í„°ë§Œ `SELECT` ì¿¼ë¦¬ë¡œ ì¡°íšŒí•˜ë„ë¡ ë³€ê²½í•˜ì—¬ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì„ ìµœì í™”í•©ë‹ˆë‹¤.

-----

## 7\. ğŸ—‚ï¸ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
.
â”œâ”€â”€ Dockerfile              # GCR ë°°í¬ìš©
â”œâ”€â”€ howToDeploy.md          # GCR ë°°í¬ ê°€ì´ë“œ
â”œâ”€â”€ README.md               # (ë³¸ íŒŒì¼)
â”‚
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ main.py           # FastAPI ì„œë²„ (API + ì •ì  íŒŒì¼ ì„œë¹™)
â”‚   â”‚   â””â”€â”€ __init__.py
â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â”œâ”€â”€ festivals.db      # SQLite ë°ì´í„°ë² ì´ìŠ¤
â”‚   â”‚   â””â”€â”€ festivals_db.csv  # (ì›ë³¸ ë°ì´í„°)
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â””â”€â”€ cosine_sim_matrix.pkl # ì½”ì‚¬ì¸ ìœ ì‚¬ë„ í–‰ë ¬
â”‚   â”œâ”€â”€ migrate_to_sqlite.py    # DB ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸
â”‚   â””â”€â”€ requirements.txt        # ë°±ì—”ë“œ ì˜ì¡´ì„±
â”‚
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ index.html            # (Figma 1) ë©”ì¸ ì§€ë„
â”‚   â”œâ”€â”€ style.css             # ê³µí†µ ìŠ¤íƒ€ì¼ì‹œíŠ¸
â”‚   â”œâ”€â”€ script.js             # ê³µí†µ ìŠ¤í¬ë¦½íŠ¸ (ì¿¼ë¦¬ ìŠ¤íŠ¸ë§, API í˜¸ì¶œ)
â”‚   â””â”€â”€ category/
â”‚       â”œâ”€â”€ category.html     # (Figma 2) ì¹´í…Œê³ ë¦¬ ì„ íƒ
â”‚       â””â”€â”€ festival/
â”‚           â”œâ”€â”€ festival.html # (Figma 3) ì¶•ì œ ëª©ë¡
â”‚           â””â”€â”€ recommandation/
â”‚               â””â”€â”€ recommandation.html # (Figma 4) ìƒì„¸ ë° ì¶”ì²œ
â”‚
â””â”€â”€ notebooks/                # ë°ì´í„° ë¶„ì„ ë° ëª¨ë¸ë§ ê³¼ì •
    â”œâ”€â”€ 1_bigDataAPI_collect.ipynb
    â”œâ”€â”€ 2_bigDataAPI_visualization.ipynb
    â”œâ”€â”€ 3_detailed_TourAPI_collect.ipynb
    â”œâ”€â”€ 4_contents_analysis.ipynb
    â””â”€â”€ 5_ML_modeling.ipynb
```

-----

## 8\. ğŸš€ ì‹¤í–‰í•˜ê¸° (How to Run)

### 1\) ë¡œì»¬ì—ì„œ ì‹¤í–‰ (Local)

1.  **DB ë§ˆì´ê·¸ë ˆì´ì…˜ (ìµœì´ˆ 1íšŒ):**
    `backend` í´ë”ë¡œ ì´ë™í•˜ì—¬ `festivals.db` íŒŒì¼ì„ ìƒì„±í•©ë‹ˆë‹¤.

    ```bash
    cd backend
    pip install -r requirements.txt
    python migrate_to_sqlite.py
    ```

2.  **ì„œë²„ ì‹¤í–‰:**
    ( `backend` í´ë”ì—ì„œ) `uvicorn` ì„œë²„ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.

    ```bash
    uvicorn app.main:app --reload
    ```

3.  ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ `http://127.0.0.1:8000`ì— ì ‘ì†í•©ë‹ˆë‹¤.

### 2\) Google Cloud Run ë°°í¬ (Deploy / Update)

ë¡œì»¬ì—ì„œ ì½”ë“œë¥¼ ìˆ˜ì •í•œ ë’¤, í”„ë¡œì íŠ¸ ë£¨íŠ¸ í´ë”(`Dockerfile`ì´ ìˆëŠ” ìœ„ì¹˜)ì—ì„œ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ ìë™ìœ¼ë¡œ ìƒˆ ë²„ì „ì´ ë¹Œë“œ ë° ë°°í¬ë©ë‹ˆë‹¤.

(ìƒì„¸ ê°€ì´ë“œëŠ” `howToDeploy.md` ì°¸ì¡°)

```bash
# [YOUR_PROJECT_ID]ì™€ [SERVICE_NAME]ì„ ë³¸ì¸ ê°’ìœ¼ë¡œ ë³€ê²½
gcloud run deploy [SERVICE_NAME] \
    --source . \
    --platform managed \
    --region asia-northeast3 \
    --allow-unauthenticated \
    --project=[YOUR_PROJECT_ID]
```

